<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>RadioPlayer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
   <style>
  /* Hide the existing "Recent Songs / history" area so script can still target it safely */
  #historicSong,
  h3, h4 {
    /* If your old headings/containers have specific IDs/classes, hide those instead */
  }
  /* A safer, targeted rule (adjust selectors to your actual markup) */
  #historicSong { display: none !important; }

  /* New panel styling */
  .panel-dual { margin: 1.25rem 0; }
  .panel-dual details {
    border: 1px solid #d7d7d7; border-radius: 8px; background: #fff;
    box-shadow: 0 4px 14px rgba(0,0,0,.06); overflow: hidden;
  }
  .panel-dual summary {
    cursor: pointer; padding: .9rem 1.1rem; font-weight: 600; list-style: none;
    background: linear-gradient(180deg,#fafafa,#f3f3f3);
  }
  .panel-dual summary::-webkit-details-marker { display: none; }

  .dual-grid { display: grid; gap: 1rem; padding: 1rem; }
  @media (min-width: 700px) { .dual-grid { grid-template-columns: 1fr 1fr; } }

  .panel { background: #fff; border: 1px solid #eee; border-radius: 8px; padding: .75rem; }
  .panel h3 { margin: .25rem 0 .75rem; font-size: 1.05rem; }
  .list { list-style: none; margin: 0; padding: 0; }
  .list li { padding: .45rem .5rem; border-bottom: 1px dashed #e8e8e8; display: flex; gap: .5rem; align-items: center; }
  .list li:last-child { border-bottom: 0; }
  .list .text { flex: 1 1 auto; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

  .btn-icon {
    border: none; background: transparent; cursor: pointer; color: #888; font-size: .95rem;
  }
  .btn-icon:hover { color: #444; }
  .btn-add-fav {
    display: inline-flex; gap: .5rem; align-items: center;
    border: 1px solid #d0d0d0; border-radius: 20px;
    padding: .4rem .8rem; background: #fff; cursor: pointer; font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,.05);
  }
  .btn-add-fav[disabled] { opacity: .5; cursor: not-allowed; }
  .empty { color: #888; font-style: italic; padding: .25rem .5rem; }
 
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#0e0e0e; color:#eee; }
    a { color:#4da3ff; }
    .wrap { max-width:960px; margin:0 auto; padding:16px 16px 90px; } /* bottom padding so content doesn't hide behind sticky panel */

    /* Simple layout areas */
    #header { display:flex; align-items:center; gap:12px; }
    #header h1 { font-size:1.25rem; margin:0; color:#fff; }

    /* Cover area (to satisfy script expectations) */
    #artZone { display:flex; gap:16px; align-items:flex-start; margin-top:12px; }
    #currentCoverArt.cover-album {
      width:220px; background:#1b1b1b center/cover no-repeat; border-radius:10px;
      box-shadow:0 10px 24px rgba(0,0,0,.35); position:relative;
    }
    #bgCover {
      display:none; /* you can toggle if you want a blurred background elsewhere */
      background-size:cover; background-position:center;
    }

    /* Now playing row + favorite star */
    #nowPlayingRow { display:flex; align-items:center; gap:.5rem; margin:12px 0; }
    #customNowPlaying { font-weight:600; }
    #favToggle { font-size:1.1rem; line-height:1; cursor:pointer; border:none; background:transparent; color:#ffd166; }

    /* Classical info (kept simple; your script shows/hides it) */
    #classicalInfo {
      display:none; background:#141414; border:1px solid #242424; border-radius:10px;
      padding:10px 12px; margin:10px 0 16px 0;
    }
    #classicalInfo h5 { margin:0 0 .35rem 0; color:#ddd; font-size:.95rem; }
    #classicalInfo .row { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:.4rem .8rem; }
    #classicalInfo .label { color:#a9a9a9; font-size:.8rem; }
    #classicalInfo .value { color:#fff; font-weight:600; font-size:.95rem; }
    #description { margin-top:.5rem; line-height:1.4; color:#e9e9e9; }

    /* Volume area */
    #controls { display:flex; align-items:center; gap:10px; margin:12px 0; }
    #volume { width:200px; }
    #buttonPlay { padding:.35rem .6rem; border-radius:8px; background:#1c1c1c; border:1px solid #2b2b2b; color:#fff; cursor:pointer; }
    #playerButton { display:none; } /* your script toggles this class name, we keep it present so no errors */

    /* Bottom sticky bundle panel */
    #bottomPanel {
      position:sticky; bottom:0; left:0; right:0; background:#111; color:#fff;
      border-top:1px solid #333; box-shadow:0 -4px 14px rgba(0,0,0,.25);
    }
    #bottomPanelBar { display:flex; align-items:center; gap:.5rem; padding:.5rem .75rem; }
    #tabRecent, #tabFavorites, #panelCollapse {
      padding:.35rem .6rem; border:none; border-radius:6px; cursor:pointer;
    }
    #tabRecent { background:#2a2a2a; color:#fff; }
    #tabFavorites { background:#1f1f1f; color:#bbb; }
    #panelCollapse { background:#1a1a1a; color:#bbb; margin-left:auto; }
    #bottomPanelContent { max-height:220px; overflow:auto; padding:.5rem .75rem; transition:max-height .2s ease; }

    #recentSection h3, #favoritesSection h3 { margin:.25rem 0 .5rem 0; font-size:1rem; color:#ddd; }
    #recentTracksList, #favoritesList { margin:0; padding-left:1.25rem; }
  </style>
</head>
<body>
  <div class="wrap">
    <header id="header">
      <h1># RadioPlayer</h1>
    </header>

    <!-- Now Playing + Favorite star -->
    <div id="nowPlayingRow">
<!-- Add-to-Favorites button -->
<button id="addToFavoritesBtn" class="btn-add-fav" type="button" aria-label="Add current track to Favorites">★ Add to Favorites</button>
      <span id="customNowPlaying">Loading current track...</span>
    </div>

    <!-- Artwork area (satisfies script references) -->
    <section id="artZone">
      <div id="currentCoverArt" class="cover-album" aria-label="Current cover art"></div>
      <div style="flex:1; min-width:0;">
        <!-- Classical details (script shows/hides and fills values) -->
        <section id="classicalInfo">
          <h5>Classical Details</h5>
          <div class="row">
            <div><span class="label">Composer:</span> <span id="composer" class="value">--</span></div>
            <div><span class="label">Era:</span> <span id="era" class="value">--</span></div>
            <div><span class="label">Year:</span> <span id="compositionYear" class="value">--</span></div>
          </div>
          <div class="label" style="margin-top:.35rem;">About this piece:</div>
          <div id="description">Loading classical information...</div>
        </section>

        <!-- Basic controls -->
        <div id="controls">
          <button id="buttonPlay" onclick="togglePlay()"><i id="playerButton" class="fa fa-play" aria-hidden="true"></i> <span>PLAY</span></button>
          <label for="volume" style="color:#bbb;">Volume</label>
          <input id="volume" type="range" min="0" max="100" step="1" value="80" />
          <span id="volIndicator">...</span>%
          &nbsp;&nbsp;<atps://example.com/
        </div>
      </div>
    </section>
  </div>
<section class="panel-dual" id="favRecentSection">
  <details open>
    <summary><strong>Favorites / Recently Played</strong></summary>
    <div class="dual-grid">
      <div class="panel">
        <h3>Favorites</h3>
        <ul id="favoritesList" class="list"></ul>
        <p class="empty" id="favoritesEmpty">No favorites yet — click “Add to Favorites”.</p>
      </div>
      <div class="panel">
        <h3>Recently Played</h3>
        <!-- Reuse the same UL ID your script already populates -->
        <ul id="recentTracksList" class="list"></ul>
        <p class="empty" id="recentEmpty" style="display:none;">No recent tracks yet.</p>
      </div>
    </div>
  </details>
</section>


  <!-- Background cover (if you decide to use it) -->
  <div id="bgCover" aria-hidden="true"></div>

  <!-- Load script last so lists exist when JS runs -->
  <script src="script.js"></script>
  <script>
(() => {
  const STORAGE_KEY = 'favoriteTracks';
  const btn = document.getElementById('addToFavoritesBtn');
  const nowEl = document.getElementById('customNowPlaying');
  const favList = document.getElementById('favoritesList');
  const favEmpty = document.getElementById('favoritesEmpty');
  const recentList = document.getElementById('recentTracksList');
  const recentEmpty = document.getElementById('recentEmpty');

  let favorites = [];

  function loadFavorites() {
    try {
      favorites = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    } catch { favorites = []; }
    renderFavorites();
    syncAddButton();
  }

  function saveFavorites() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(favorites));
  }

  function addFavorite(track) {
    if (!track || track.trim() === '') return;
    if (favorites.some(f => f.track === track)) return; // dedupe
    favorites.unshift({ track, addedAt: Date.now() });
    saveFavorites();
    renderFavorites();
    syncAddButton();
  }

  function removeFavorite(index) {
    favorites.splice(index, 1);
    saveFavorites();
    renderFavorites();
    syncAddButton();
  }

  function renderFavorites() {
    favList.innerHTML = '';
    if (favorites.length === 0) {
      favEmpty.style.display = '';
      return;
    }
    favEmpty.style.display = 'none';
    favorites.forEach((item, idx) => {
      const li = document.createElement('li');
      const text = document.createElement('span');
      text.className = 'text';
      text.textContent = item.track;

      const del = document.createElement('button');
      del.className = 'btn-icon';
      del.title = 'Remove from favorites';
      del.setAttribute('aria-label', `Remove ${item.track} from favorites`);
      del.textContent = '✕';
      del.addEventListener('click', () => removeFavorite(idx));

      li.appendChild(text);
      li.appendChild(del);
      favList.appendChild(li);
    });
  }

  function currentTrack() {
    return (nowEl?.innerText || '').trim();
  }

  function syncAddButton() {
    const track = currentTrack();
    const exists = favorites.some(f => f.track === track);
    btn.disabled = !track || exists;
    btn.title = exists ? 'Already in favorites' : 'Add current track to Favorites';
  }

  // When user clicks the star button
  btn?.addEventListener('click', () => {
    const track = currentTrack();
    addFavorite(track);
  });

  // Watch for changes in the now playing text to update button state
  if (nowEl) {
    const obs = new MutationObserver(syncAddButton);
    obs.observe(nowEl, { childList: true, characterData: true, subtree: true });
  }

  // Watch for changes to the recent list that your existing script fills,
  // so we can show/hide "empty" hint accordingly (without overriding your function).
  if (recentList && recentEmpty) {
    const recentObs = new MutationObserver(() => {
      const hasItems = recentList.children.length > 0;
      recentEmpty.style.display = hasItems ? 'none' : '';
    });
    recentObs.observe(recentList, { childList: true });
  }

  // Init
  loadFavorites();
})();
</script>

</body>
</html>
